webpackJsonp([12],{RtsM:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Xxa5"),i=t.n(a),l=t("fZjL"),r=t.n(l),n=t("exGp"),s=t.n(n),c=t("woOf"),f=t.n(c),d=t("8e4C"),u={data:function(){return{form:{focusAddrList:[],voiceNotifyFlag:1,wxNotifyFlag:1},errors:{focusAddrList:[],villages:[]},villages:[{village:""}],searchDialog:{show:!1,provinceId:"",cityId:"",areaId:""},voiceNotifyFlags:d.j,voiceNotifyFlagPopShow:!1,wxNotifyFlags:d.j,wxNotifyFlagPopShow:!1}},created:function(){this.getRecylerInfo()},methods:{getRecylerInfo:function(){var o=this;this.$ajax("getRecylerInfo").then(function(e){var t=e.data.defaultAddr||{};e.data.focusAddrList||(e.data.focusAddrList=[]);var a=e.data,i=a.focusAddrList,l=a.mobilePhone,r=a.verifyLogo,n=a.wxNotifyFlag,s=a.voiceNotifyFlag;o.form=f()({},o.form,{focusAddrList:i,mobilePhone:l,verifyLogo:r,defaultAddr:t,wxNotifyFlag:n,voiceNotifyFlag:s}),i&&i.length&&(o.villages=i.map(function(o){return{addrId:o.addrId,village:o.complexVo.addrDetail+o.complexVo.complexName,complexVo:o.complexVo}}))})},handleAddOrRemoveVillage:function(o,e){if(0===e){if(this.villages.length>=3)return this.$dialog.alert({title:"提醒",message:"服务小区最多添加3个"}),!1;this.villages.push({}),this.form.focusAddrList[e]={}}else this.villages.splice(e,1),this.form.focusAddrList.splice(e,1)},onClickLeft:function(){this.$router.go(-1)},submit:function(){var o=this;return s()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.errors.villages.length=0,o.villages.map(function(e){e.village?e.errorMessage=null:e.errorMessage="请填写",o.errors.villages.push(e.errorMessage)}),t=[],r()(o.errors).map(function(e){var a=o.errors[e]&&o.errors[e]instanceof Array&&o.errors[e].join("");a&&t.push(a)}),!t.length){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,o.$ajax("addUserDetail",o.form);case 8:return e.next=10,o.$dialog.alert({message:"操作成功"});case 10:window.location.href="/";case 11:case"end":return e.stop()}},e,o)}))()},clickFocusAddrHandle:function(o,e){var t=o.complexVo||{};this.searchDialog=f()({},{show:!1},t),this.searchDialog.type="focus",this.searchDialog.index=e,this.searchDialog.show=!0},searchHandle:function(o){var e=this.searchDialog.index;this.villages[e]={village:o.addrDetail+o.complexName,complexVo:o},this.form.focusAddrList[e]={complexId:o.id}},formatVoiceNotifyFlag:function(o){var e=d.j.filter(function(e){return e.id===o});return e.length?e[0].label:"请选择"},handleVoiceNotifyFlagConfirm:function(o){this.form.voiceNotifyFlag=o[0].id,this.voiceNotifyFlagPopShow=!1},formatWxNotifyFlag:function(o){var e=d.j.filter(function(e){return e.id===o});return e.length?e[0].label:"请选择"},handleWxNotifyFlagConfirm:function(o){this.form.wxNotifyFlag=o[0].id,this.wxNotifyFlagPopShow=!1}}},v={render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"user-recyler"}},[t("van-row",[t("van-col",{staticClass:"title",attrs:{span:"24"}},[o._v("我的关注")])],1),o._v(" "),t("van-cell-group",{staticClass:"content"},[o._l(o.villages,function(e,a){return t("van-field",{key:a,attrs:{label:"服务小区",required:"",rows:"1",type:"textarea",autosize:"",placeholder:"请输入小区详细地址","error-message":o.errors.villages[a]},on:{"click-icon":function(t){o.handleAddOrRemoveVillage(e,a)},focus:function(t){t.preventDefault(),o.clickFocusAddrHandle(e,a)}},model:{value:e.village,callback:function(t){o.$set(e,"village",t)},expression:"item.village"}},[t("van-icon",0===a?{attrs:{slot:"icon",name:"add"},slot:"icon"}:{attrs:{slot:"icon",name:"delete"},slot:"icon"})],1)}),o._v(" "),t("van-cell",{attrs:{title:"电话通知订单",value:o.formatVoiceNotifyFlag(o.form.voiceNotifyFlag)},on:{click:function(e){o.voiceNotifyFlagPopShow=!0}}}),o._v(" "),t("van-cell",{attrs:{title:"微信通知订单",value:o.formatWxNotifyFlag(o.form.wxNotifyFlag)},on:{click:function(e){o.wxNotifyFlagPopShow=!0}}})],2),o._v(" "),t("van-row",[t("van-col",{attrs:{span:"24"}},[t("van-button",{attrs:{type:"primary",block:""},on:{click:o.submit}},[o._v("修改信息")])],1),o._v(" "),t("van-col",{staticStyle:{"margin-top":"20px"},attrs:{span:"24"}},[t("van-button",{attrs:{block:""},on:{click:o.onClickLeft}},[o._v("返回")])],1)],1),o._v(" "),t("search",{attrs:{show:o.searchDialog.show,"province-id":o.searchDialog.provinceId,"city-id":o.searchDialog.cityId,"area-id":o.searchDialog.areaId},on:{"update:show":function(e){o.$set(o.searchDialog,"show",e)},select:o.searchHandle}}),o._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:o.voiceNotifyFlagPopShow,callback:function(e){o.voiceNotifyFlagPopShow=e},expression:"voiceNotifyFlagPopShow"}},[t("van-picker",{attrs:{columns:[{values:o.voiceNotifyFlags,defaultIndex:o.form.voiceNotifyFlag?0:1}],"value-key":"label","show-toolbar":"",title:"电话通知订单"},on:{confirm:o.handleVoiceNotifyFlagConfirm,cancel:function(e){o.voiceNotifyFlagPopShow=!1}}})],1),o._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:o.wxNotifyFlagPopShow,callback:function(e){o.wxNotifyFlagPopShow=e},expression:"wxNotifyFlagPopShow"}},[t("van-picker",{attrs:{columns:[{values:o.wxNotifyFlags,defaultIndex:o.form.wxNotifyFlag?0:1}],"value-key":"label","show-toolbar":"",title:"微信通知订单"},on:{confirm:o.handleWxNotifyFlagConfirm,cancel:function(e){o.wxNotifyFlagPopShow=!1}}})],1)],1)},staticRenderFns:[]};var g=t("VU/8")(u,v,!1,function(o){t("fxTg")},"data-v-134ae874",null);e.default=g.exports},fxTg:function(o,e){}});
//# sourceMappingURL=12.f4eec9f1da2546ef4c35.js.map