webpackJsonp([1,8],{"7jRv":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("woOf"),n=e.n(s),r={props:{show:{type:Boolean},search:{type:Object}},watch:{show:function(a){var t=this;a&&this.$nextTick(function(){t.form=n()({},t.form,t.search)})}},data:function(){return{form:{userType:"",userStatus:"",searchType:"",searchContent:""}}},methods:{toggerField:function(a,t){if(this.form[a]===t)return this.form[a]="",!1;this.form[a]=+t},reset:function(){this.form={userType:"",userStatus:"",searchType:"",searchContent:""}},cancel:function(){this.$emit("update:show",!1)},sure:function(){if(this.form.searchType||(this.form.searchContent=""),Boolean(this.form.searchContent)!==Boolean(this.form.searchType))return this.$toast("请输入搜索内容"),document.getElementById("searchContent").focus(),!1;this.cancel(),this.$emit("search",this.form)}}},c={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("van-popup",{attrs:{"close-on-click-overlay":!1,overlay:!0,position:"right","get-container":"#app","lazy-render":!1,"overlay-style":{backgroundColor:"rgba(0,0,0,0.8)"}},on:{"click-overlay":a.cancel},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[e("div",{staticClass:"usersearch-wrap"},[e("div",{staticClass:"search-block"},[e("van-row",[e("van-col",{attrs:{span:"24"}},[a._v("用户类型")])],1),a._v(" "),e("van-row",[e("van-col",[e("van-button",{class:{"search-checked":1===a.form.userType},attrs:{size:"small"},on:{click:function(t){a.toggerField("userType",1)}}},[a._v("业主")])],1),a._v(" "),e("van-col",{attrs:{offset:"1"}},[e("van-button",{class:{"search-checked":2===a.form.userType},attrs:{size:"small"},on:{click:function(t){a.toggerField("userType",2)}}},[a._v("回收员")])],1)],1)],1),a._v(" "),e("div",{staticClass:"search-block"},[e("van-row",[e("van-col",{attrs:{span:"24"}},[a._v("用户状态")])],1),a._v(" "),e("van-row",[e("van-col",[e("van-button",{class:{"search-checked":1===a.form.userStatus},attrs:{size:"small"},on:{click:function(t){a.toggerField("userStatus",1)}}},[a._v("正常")])],1),a._v(" "),e("van-col",{attrs:{offset:"1"}},[e("van-button",{class:{"search-checked":2===a.form.userStatus},attrs:{size:"small"},on:{click:function(t){a.toggerField("userStatus",2)}}},[a._v("待提交审核")])],1),a._v(" "),e("van-col",{attrs:{offset:"1"}},[e("van-button",{class:{"search-checked":3===a.form.userStatus},attrs:{size:"small"},on:{click:function(t){a.toggerField("userStatus",3)}}},[a._v("审核不通过")])],1)],1),a._v(" "),e("van-row",[e("van-col",[e("van-button",{class:{"search-checked":4===a.form.userStatus},attrs:{size:"small"},on:{click:function(t){a.toggerField("userStatus",4)}}},[a._v("审核中")])],1),a._v(" "),e("van-col",{attrs:{offset:"1"}},[e("van-button",{class:{"search-checked":5===a.form.userStatus},attrs:{size:"small"},on:{click:function(t){a.toggerField("userStatus",5)}}},[a._v("禁用")])],1)],1)],1),a._v(" "),e("div",{staticClass:"search-block"},[e("van-row",[e("van-col",{attrs:{span:"24"}},[a._v("搜索类型")])],1),a._v(" "),e("van-row",[e("van-col",[e("van-button",{class:{"search-checked":1===a.form.searchType},attrs:{size:"small"},on:{click:function(t){a.toggerField("searchType",1)}}},[a._v("昵称")])],1),a._v(" "),e("van-col",{attrs:{offset:"1"}},[e("van-button",{class:{"search-checked":2===a.form.searchType},attrs:{size:"small"},on:{click:function(t){a.toggerField("searchType",2)}}},[a._v("手机号")])],1)],1)],1),a._v(" "),a.form.searchType?e("div",{staticClass:"search-block"},[e("van-row",[e("van-col",[a._v("搜索内容")])],1),a._v(" "),e("van-row",[e("van-col",{attrs:{span:"20"}},[e("van-field",{attrs:{id:"searchContent",placeholder:"请输入内容"},model:{value:a.form.searchContent,callback:function(t){a.$set(a.form,"searchContent",t)},expression:"form.searchContent"}})],1)],1)],1):a._e()]),a._v(" "),e("div",{staticClass:"btn"},[e("van-row",[e("van-col",{attrs:{span:"12"}},[e("van-button",{attrs:{size:"small"},on:{click:a.reset}},[a._v("重置")])],1),a._v(" "),e("van-col",{attrs:{span:"12"}},[e("van-button",{attrs:{type:"warning",size:"small"},on:{click:a.sure}},[a._v("确定")])],1)],1)],1)])],1)},staticRenderFns:[]};var o=e("VU/8")(r,c,!1,function(a){e("OTey")},"data-v-5a0ad164",null);t.default=o.exports},OQh8:function(a,t){},OTey:function(a,t){},x0vE:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("woOf"),n=e.n(s),r=e("Xxa5"),c=e.n(r),o=e("exGp"),i=e.n(o),l=e("6Bqv"),u=e("8e4C"),h=e("7jRv"),v={components:{RecyleList:l.default,Search:h.default},data:function(){return{data:[],data2:[],active:this.$route.query.user?1:0,loading:!1,finished:!1,params:{page:1,size:10},params2:{page:1,size:10},searchDialog:{show:!1,search:{userType:"",userStatus:"",searchType:"",searchContent:""}}}},created:function(){this.handleTabbar(this.active)},methods:{getRecyleList:function(){var a=this;return i()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,e={status:"",page:a.params.page,size:a.params.size},t.next=4,a.$ajax("recylerListByAdmin",e).then(function(t){0===t.data.length&&(a.finished=!0),1===a.params.page?a.data=t.data:a.data=a.data.concat(t.data),a.params.page++}).finally(function(){a.loading=!1});case 4:case"end":return t.stop()}},t,a)}))()},searchUser:function(){var a=this;return i()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,e=n()({},a.searchDialog.search,{page:a.params2.page,size:a.params2.size}),t.next=4,a.$ajax("searchUser",e).then(function(t){0===t.data.list.length&&(a.finished=!0),1===a.params2.page?a.data2=t.data.list:a.data2=a.data2.concat(t.data.list),a.params2.page++}).finally(function(){a.loading=!1});case 4:case"end":return t.stop()}},t,a)}))()},onRefresh:function(){var a=this;return i()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.params.page=1,t.next=3,a.getRecyleList();case 3:case"end":return t.stop()}},t,a)}))()},onRefresh2:function(){var a=this;return i()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.params2.page=1,t.next=3,a.searchUser();case 3:case"end":return t.stop()}},t,a)}))()},handleTabbar:function(a){if(this.active=a,0===a)return this.params.page=1,void this.getRecyleList();this.params2.page=1,this.searchUser()},handleRecylerClick:function(a){this.$router.push("/admin/recyledetail/"+a.id)},handleUserClick:function(a){3!==a.userType?this.$router.push("/admin/userdetail/"+a.id+"/"+a.userType+"/"+a.userStatus):this.$dialog.alert({message:"该用户为管理员"})},formatType:function(a){return 1===a?"业主":2===a?"回收人员":"管理员"},formatStatus:function(a){var t=u.i.filter(function(t){return t.id===+a});return t.length?t[0].label:"--"},handleSearch:function(a){this.params2.page=1,this.searchDialog.search=a,this.searchUser()}}},f={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"admin-wrap"}},[e("van-nav-bar",{attrs:{title:0===a.active?"回收列表":"用户列表","right-text":1===a.active?"筛选":""},on:{"click-right":function(t){a.searchDialog.show=!0}}}),a._v(" "),0===a.active?e("van-pull-refresh",{staticClass:"admin-content",on:{refresh:a.onRefresh},model:{value:a.loading,callback:function(t){a.loading=t},expression:"loading"}},[e("recyle-list",{attrs:{data:a.data},on:{click:a.handleRecylerClick}}),a._v(" "),a.finished?e("p",{staticClass:"loadmore"},[a._v("没有更多了")]):e("p",{staticClass:"loadmore",on:{click:a.getRecyleList}},[a._v("点击加载更多")])],1):e("van-pull-refresh",{staticClass:"admin-content",on:{refresh:a.onRefresh2},model:{value:a.loading,callback:function(t){a.loading=t},expression:"loading"}},[a._l(a.data2,function(t,s){return e("div",{key:s,on:{click:function(e){a.handleUserClick(t)}}},[e("van-row",{staticClass:"user-item"},[e("van-col",{attrs:{span:"24"}},[e("van-row",{staticClass:"item-content"},[e("van-col",{attrs:{span:"4"}},[e("img",{staticClass:"resImage",attrs:{src:t.wxLogo}})]),a._v(" "),e("van-col",{attrs:{span:"12"}},[e("van-row",[e("span",[a._v("昵称："+a._s(t.wxNickName))])]),a._v(" "),e("van-row",[e("span",[a._v("类型："+a._s(a.formatType(t.userType)))])])],1),a._v(" "),e("van-col",{staticClass:"status",class:"status"+t.userStatus,attrs:{span:"8"}},[a._v(a._s(a.formatStatus(t.userStatus)))])],1)],1)],1)],1)}),a._v(" "),a.finished?e("p",{staticClass:"loadmore"},[a._v("没有更多了")]):e("p",{staticClass:"loadmore",on:{click:a.searchUser}},[a._v("点击加载更多")])],2),a._v(" "),e("van-tabbar",{on:{change:a.handleTabbar},model:{value:a.active,callback:function(t){a.active=t},expression:"active"}},[e("van-tabbar-item",{attrs:{icon:"wap-home"}},[a._v("回收列表")]),a._v(" "),e("van-tabbar-item",{attrs:{icon:"records"}},[a._v("用户列表")])],1),a._v(" "),a.loading?e("van-loading",{staticClass:"loading",attrs:{color:"white"}}):a._e(),a._v(" "),e("search",{attrs:{show:a.searchDialog.show,search:a.searchDialog.search},on:{"update:show":function(t){a.$set(a.searchDialog,"show",t)},search:a.handleSearch}})],1)},staticRenderFns:[]};var d=e("VU/8")(v,f,!1,function(a){e("OQh8")},"data-v-705f03a2",null);t.default=d.exports}});
//# sourceMappingURL=1.e396b29864dfdb07afe1.js.map