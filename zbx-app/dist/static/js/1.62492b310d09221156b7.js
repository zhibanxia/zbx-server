webpackJsonp([1,11],{"7jRv":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("woOf"),n=t.n(s),r={props:{show:{type:Boolean},search:{type:Object}},watch:{show:function(a){var e=this;a&&this.$nextTick(function(){e.form=n()({},e.form,e.search)})}},data:function(){return{form:{userType:"",userStatus:"",searchType:"",searchContent:""}}},methods:{toggerField:function(a,e){if(this.form[a]===e)return this.form[a]="",!1;this.form[a]=+e},reset:function(){this.form={userType:"",userStatus:"",searchType:"",searchContent:""}},cancel:function(){this.$emit("update:show",!1)},sure:function(){if(this.form.searchType||(this.form.searchContent=""),Boolean(this.form.searchContent)!==Boolean(this.form.searchType))return this.$toast("请输入搜索内容"),document.getElementById("searchContent").focus(),!1;this.cancel(),this.$emit("search",this.form)}}},c={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("van-popup",{attrs:{"close-on-click-overlay":!1,overlay:!0,position:"right","get-container":"#app","lazy-render":!1,"overlay-style":{backgroundColor:"rgba(0,0,0,0.8)"}},on:{"click-overlay":a.cancel},model:{value:a.show,callback:function(e){a.show=e},expression:"show"}},[t("div",{staticClass:"usersearch-wrap"},[t("div",{staticClass:"search-block"},[t("van-row",[t("van-col",{attrs:{span:"24"}},[a._v("用户类型")])],1),a._v(" "),t("van-row",[t("van-col",[t("van-button",{class:{"search-checked":1===a.form.userType},attrs:{size:"small"},on:{click:function(e){a.toggerField("userType",1)}}},[a._v("业主")])],1),a._v(" "),t("van-col",{attrs:{offset:"1"}},[t("van-button",{class:{"search-checked":2===a.form.userType},attrs:{size:"small"},on:{click:function(e){a.toggerField("userType",2)}}},[a._v("回收者")])],1)],1)],1),a._v(" "),t("div",{staticClass:"search-block"},[t("van-row",[t("van-col",{attrs:{span:"24"}},[a._v("用户状态")])],1),a._v(" "),t("van-row",[t("van-col",[t("van-button",{class:{"search-checked":1===a.form.userStatus},attrs:{size:"small"},on:{click:function(e){a.toggerField("userStatus",1)}}},[a._v("正常")])],1),a._v(" "),t("van-col",{attrs:{offset:"1"}},[t("van-button",{class:{"search-checked":2===a.form.userStatus},attrs:{size:"small"},on:{click:function(e){a.toggerField("userStatus",2)}}},[a._v("待提交审核")])],1),a._v(" "),t("van-col",{attrs:{offset:"1"}},[t("van-button",{class:{"search-checked":3===a.form.userStatus},attrs:{size:"small"},on:{click:function(e){a.toggerField("userStatus",3)}}},[a._v("审核不通过")])],1)],1),a._v(" "),t("van-row",[t("van-col",[t("van-button",{class:{"search-checked":4===a.form.userStatus},attrs:{size:"small"},on:{click:function(e){a.toggerField("userStatus",4)}}},[a._v("审核中")])],1),a._v(" "),t("van-col",{attrs:{offset:"1"}},[t("van-button",{class:{"search-checked":5===a.form.userStatus},attrs:{size:"small"},on:{click:function(e){a.toggerField("userStatus",5)}}},[a._v("禁用")])],1)],1)],1),a._v(" "),t("div",{staticClass:"search-block"},[t("van-row",[t("van-col",{attrs:{span:"24"}},[a._v("搜索类型")])],1),a._v(" "),t("van-row",[t("van-col",[t("van-button",{class:{"search-checked":1===a.form.searchType},attrs:{size:"small"},on:{click:function(e){a.toggerField("searchType",1)}}},[a._v("昵称")])],1),a._v(" "),t("van-col",{attrs:{offset:"1"}},[t("van-button",{class:{"search-checked":2===a.form.searchType},attrs:{size:"small"},on:{click:function(e){a.toggerField("searchType",2)}}},[a._v("手机号")])],1)],1)],1),a._v(" "),a.form.searchType?t("div",{staticClass:"search-block"},[t("van-row",[t("van-col",[a._v("搜索内容")])],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"20"}},[t("van-field",{attrs:{id:"searchContent",placeholder:"请输入内容"},model:{value:a.form.searchContent,callback:function(e){a.$set(a.form,"searchContent",e)},expression:"form.searchContent"}})],1)],1)],1):a._e()]),a._v(" "),t("div",{staticClass:"btn"},[t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-button",{attrs:{size:"small"},on:{click:a.reset}},[a._v("重置")])],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-button",{attrs:{type:"warning",size:"small"},on:{click:a.sure}},[a._v("确定")])],1)],1)],1)])],1)},staticRenderFns:[]};var o=t("VU/8")(r,c,!1,function(a){t("jUOe")},"data-v-17e5e881",null);e.default=o.exports},OQh8:function(a,e){},jUOe:function(a,e){},x0vE:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("woOf"),n=t.n(s),r=t("Xxa5"),c=t.n(r),o=t("exGp"),i=t.n(o),l=t("6Bqv"),u=t("8e4C"),h=t("7jRv"),v={components:{RecyleList:l.default,Search:h.default},data:function(){return{data:[],data2:[],active:this.$route.query.user?1:0,loading:!1,finished:!1,params:{page:1,size:10},params2:{page:1,size:10},searchDialog:{show:!1,search:{userType:"",userStatus:"",searchType:"",searchContent:""}}}},created:function(){this.handleTabbar(this.active)},methods:{getRecyleList:function(){var a=this;return i()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!0,t={status:"",page:a.params.page,size:a.params.size},e.next=4,a.$ajax("recylerListByAdmin",t).then(function(e){0===e.data.length&&(a.finished=!0),1===a.params.page?a.data=e.data:a.data=a.data.concat(e.data),a.params.page++}).finally(function(){a.loading=!1});case 4:case"end":return e.stop()}},e,a)}))()},searchUser:function(){var a=this;return i()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!0,t=n()({},a.searchDialog.search,{page:a.params2.page,size:a.params2.size}),e.next=4,a.$ajax("searchUser",t).then(function(e){0===e.data.list.length&&(a.finished=!0),1===a.params2.page?a.data2=e.data.list:a.data2=a.data2.concat(e.data.list),a.params2.page++}).finally(function(){a.loading=!1});case 4:case"end":return e.stop()}},e,a)}))()},onRefresh:function(){var a=this;return i()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.params.page=1,e.next=3,a.getRecyleList();case 3:case"end":return e.stop()}},e,a)}))()},onRefresh2:function(){var a=this;return i()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.params2.page=1,e.next=3,a.searchUser();case 3:case"end":return e.stop()}},e,a)}))()},handleTabbar:function(a){if(this.active=a,0===a)return this.params.page=1,void this.getRecyleList();this.params2.page=1,this.searchUser()},handleRecylerClick:function(a){this.$router.push("/admin/recyledetail/"+a.id)},handleUserClick:function(a){3!==a.userType?this.$router.push("/admin/userdetail/"+a.id+"/"+a.userType+"/"+a.userStatus):this.$dialog.alert({message:"该用户为管理员"})},formatType:function(a){return 1===a?"业主":2===a?"回收人员":"管理员"},formatStatus:function(a){var e=u.g.filter(function(e){return e.id===+a});return e.length?e[0].label:"--"},handleSearch:function(a){this.params2.page=1,this.searchDialog.search=a,this.searchUser()}}},f={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"admin-wrap"}},[t("van-nav-bar",{attrs:{title:0===a.active?"回收列表":"用户列表","right-text":1===a.active?"筛选":""},on:{"click-right":function(e){a.searchDialog.show=!0}}}),a._v(" "),0===a.active?t("van-pull-refresh",{staticClass:"admin-content",on:{refresh:a.onRefresh},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},[t("recyle-list",{attrs:{data:a.data},on:{click:a.handleRecylerClick}}),a._v(" "),a.finished?t("p",{staticClass:"loadmore"},[a._v("没有更多了")]):t("p",{staticClass:"loadmore",on:{click:a.getRecyleList}},[a._v("点击加载更多")])],1):t("van-pull-refresh",{staticClass:"admin-content",on:{refresh:a.onRefresh2},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},[a._l(a.data2,function(e,s){return t("div",{key:s,on:{click:function(t){a.handleUserClick(e)}}},[t("van-row",{staticClass:"user-item"},[t("van-col",{attrs:{span:"24"}},[t("van-row",{staticClass:"item-content"},[t("van-col",{attrs:{span:"4"}},[t("img",{staticClass:"resImage",attrs:{src:e.wxLogo}})]),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-row",[t("span",[a._v("昵称："+a._s(e.wxNickName))])]),a._v(" "),t("van-row",[t("span",[a._v("类型："+a._s(a.formatType(e.userType)))])])],1),a._v(" "),t("van-col",{staticClass:"status",class:"status"+e.userStatus,attrs:{span:"8"}},[a._v(a._s(a.formatStatus(e.userStatus)))])],1)],1)],1)],1)}),a._v(" "),a.finished?t("p",{staticClass:"loadmore"},[a._v("没有更多了")]):t("p",{staticClass:"loadmore",on:{click:a.searchUser}},[a._v("点击加载更多")])],2),a._v(" "),t("van-tabbar",{on:{change:a.handleTabbar},model:{value:a.active,callback:function(e){a.active=e},expression:"active"}},[t("van-tabbar-item",{attrs:{icon:"wap-home"}},[a._v("回收列表")]),a._v(" "),t("van-tabbar-item",{attrs:{icon:"records"}},[a._v("用户列表")])],1),a._v(" "),a.loading?t("van-loading",{staticClass:"loading",attrs:{color:"white"}}):a._e(),a._v(" "),t("search",{attrs:{show:a.searchDialog.show,search:a.searchDialog.search},on:{"update:show":function(e){a.$set(a.searchDialog,"show",e)},search:a.handleSearch}})],1)},staticRenderFns:[]};var d=t("VU/8")(v,f,!1,function(a){t("OQh8")},"data-v-705f03a2",null);e.default=d.exports}});
//# sourceMappingURL=1.62492b310d09221156b7.js.map